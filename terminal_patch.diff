<<<<<<< SEARCH
let terminalState = {
    initialized: false,
    cwd: '~',
    inChat: false,
    inAssessment: false,
    history: [],
    historyIndex: -1,
    pwned: false
};
=======
let terminalState = {
    initialized: false,
    cwd: '~',
    inChat: false,
    inAssessment: false,
    inLogin: false,
    inConfig: false,
    loginStep: 'user',
    configStep: 0,
    history: [],
    historyIndex: -1,
    pwned: false
};
>>>>>>> REPLACE
<<<<<<< SEARCH
function initTerminal() {
    initMatrix();
    initWindowManagement();
    const banner = `
 <span class="term-blue"> _  __     _ _  ____                     </span>
 <span class="term-blue">| |/ /__ _| (_) / ___| _   _ _ __ _   _  </span>
 <span class="term-blue">| ' / _\ | | | | |  _ | | | | '__| | | | </span>
 <span class="term-blue">| . \ (_| | | | | |_| | |_| | |  | |_| | </span>
 <span class="term-blue">|_|\_\__,_|_|_|  \____| \__,_|_|   \__, | </span>
 <span class="term-blue">                                   |___/  </span>
 <span class="term-dim">   Mode: ${appState.terminalSubMode.toUpperCase()} | Status: ${appState.pwned ? 'PWNED' : 'SECURE'}</span>`;

    const pre = document.createElement('pre');
    pre.innerHTML = banner;
    elements.terminalOutput.innerHTML = '';
    elements.terminalOutput.appendChild(pre);
    terminalPrint("Type 'help' for commands.", "term-dim");

    elements.terminalInput.addEventListener('keydown', handleTerminalKeydown);
    terminalState.initialized = true;
}
=======
function initTerminal() {
    initMatrix();
    initWindowManagement();
    elements.terminalOutput.innerHTML = '';

    if (!appState.user) {
        terminalPrint("SYSTEM ACCESS RESTRICTED", "term-red term-bold");
        terminalPrint("Please login to continue.", "term-white");
        terminalPrint("Username: ", "inline");
        terminalState.inLogin = true;
        terminalState.loginStep = 'user';
    } else {
        showTerminalWelcome();
    }

    if (!terminalState.initialized) {
        elements.terminalInput.addEventListener('keydown', handleTerminalKeydown);
    }
    terminalState.initialized = true;
}

function showTerminalWelcome() {
    const banner = `
 <span class="term-blue"> _  __     _ _  ____                     </span>
 <span class="term-blue">| |/ /__ _| (_) / ___| _   _ _ __ _   _  </span>
 <span class="term-blue">| ' / _\ | | | | |  _ | | | | '__| | | | </span>
 <span class="term-blue">| . \ (_| | | | | |_| | |_| | |  | |_| | </span>
 <span class="term-blue">|_|\_\__,_|_|_|  \____| \__,_|_|   \__, | </span>
 <span class="term-blue">                                   |___/  </span>
 <span class="term-dim">   User: ${appState.user?.username || 'Guest'} | Status: ${appState.pwned ? 'PWNED' : 'SECURE'}</span>`;

    const pre = document.createElement('pre');
    pre.innerHTML = banner;
    elements.terminalOutput.appendChild(pre);
    terminalPrint("Welcome back, Commander.", "term-green");

    const hasKey = localStorage.getItem('groq_api_key') || localStorage.getItem('gemini_api_key') || localStorage.getItem('deepseek_api_key');
    if (!hasKey) {
        terminalPrint("\n[!] WARNING: AI Services not configured.", "term-yellow");
        terminalPrint("Type 'setup' to configure API keys.", "term-dim");
    }

    terminalPrint("\nType 'help' for available commands.", "term-dim");
}
>>>>>>> REPLACE
