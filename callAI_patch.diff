<<<<<<< SEARCH
    // Groq ONLY
    let currentApiKey = customKeys.groq || AI_API_KEY;
    const isCustom = !!customKeys.groq;

    if (!currentApiKey) {
        throw new Error("Groq API key is missing");
    }

    if (isCustom) {
        const maskedKey = currentApiKey.substring(0, 4) + '...' + currentApiKey.substring(currentApiKey.length - 4);
        console.log(`ðŸ”‘ Using custom user-provided Groq API key: ${maskedKey}`);
    } else {
        console.log(`ðŸ¤– Using system-wide Groq API key`);
    }

    console.log(`ðŸ“¤ Calling GROQ API (stream=${stream}, isCustom=${isCustom})...`);

    const result = await tryCallAI(currentApiKey, AI_MODEL, AI_API_URL, prompt, expectJson, retries, maxTokens, stream);
=======
    let currentApiKey = customKeys.groq || customKeys.deepseek || AI_API_KEY;
    let currentModel = AI_MODEL;
    let currentUrl = AI_API_URL;
    const isCustom = !!(customKeys.groq || customKeys.deepseek);

    if (customKeys.deepseek) {
        currentModel = 'deepseek-chat';
        currentUrl = 'https://api.deepseek.com/v1/chat/completions';
    }

    if (!currentApiKey) {
        throw new Error("API key is missing");
    }

    if (isCustom) {
        const maskedKey = currentApiKey.substring(0, 4) + '...' + currentApiKey.substring(currentApiKey.length - 4);
        console.log(`ðŸ”‘ Using custom user-provided API key: ${maskedKey}`);
    } else {
        console.log(`ðŸ¤– Using system-wide API key`);
    }

    console.log(`ðŸ“¤ Calling AI API (model=${currentModel}, isCustom=${isCustom})...`);

    const result = await tryCallAI(currentApiKey, currentModel, currentUrl, prompt, expectJson, retries, maxTokens, stream);
>>>>>>> REPLACE
